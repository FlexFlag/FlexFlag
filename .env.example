# FlexFlag Configuration
# Copy this file to .env and modify values as needed
# All configuration uses the FLEXFLAG_ prefix

# =============================================================================
# CORE API SERVER CONFIGURATION
# =============================================================================

# Server Configuration
FLEXFLAG_SERVER_HOST=0.0.0.0
FLEXFLAG_SERVER_PORT=8080
FLEXFLAG_SERVER_DEBUG=true
FLEXFLAG_SERVER_ENVIRONMENT=development

# CORS Configuration (comma-separated origins)
FLEXFLAG_CORS_ALLOWED_ORIGINS="http://localhost:3000,http://localhost:8080"

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================

# Database Connection
FLEXFLAG_DATABASE_HOST=localhost
FLEXFLAG_DATABASE_PORT=5433
FLEXFLAG_DATABASE_USERNAME=flexflag
FLEXFLAG_DATABASE_PASSWORD=flexflag
FLEXFLAG_DATABASE_DATABASE=flexflag
FLEXFLAG_DATABASE_SSL_MODE=disable

# Connection Pool Settings
FLEXFLAG_DATABASE_MAX_CONNS=10
FLEXFLAG_DATABASE_MIN_CONNS=2

# =============================================================================
# REDIS CONFIGURATION (Caching & Sessions)
# =============================================================================

FLEXFLAG_REDIS_HOST=localhost
FLEXFLAG_REDIS_PORT=6379
FLEXFLAG_REDIS_PASSWORD=""
FLEXFLAG_REDIS_DATABASE=0

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
FLEXFLAG_JWT_SECRET="your-super-secret-jwt-key-change-in-production"
FLEXFLAG_JWT_EXPIRY=24h

# =============================================================================
# PERFORMANCE & CACHING
# =============================================================================

# Global Cache Settings
FLEXFLAG_CACHE_ENABLED=true
FLEXFLAG_CACHE_TTL=300

# Metrics Collection
FLEXFLAG_METRICS_ENABLED=true

# =============================================================================
# EDGE SERVER CONFIGURATION
# =============================================================================

# Edge Server Deployment Settings
FLEXFLAG_EDGE_PORT=8081
FLEXFLAG_EDGE_ENVIRONMENT=production
FLEXFLAG_HUB_URL=http://localhost:8080
FLEXFLAG_EDGE_API_KEY=your_api_key_here

# Edge Server Cache Configuration
FLEXFLAG_EDGE_MAX_FLAGS=10000
FLEXFLAG_EDGE_MAX_API_KEYS=1000
FLEXFLAG_EDGE_CACHE_TTL=1h
FLEXFLAG_EDGE_CLEANUP_INTERVAL=5m
FLEXFLAG_EDGE_ENABLE_METRICS=true

# Edge Server Sync Configuration
FLEXFLAG_EDGE_SYNC_TYPE=sse
FLEXFLAG_EDGE_RECONNECT_INTERVAL=30s
FLEXFLAG_EDGE_HEARTBEAT_INTERVAL=30s
FLEXFLAG_EDGE_MAX_RETRIES=5
FLEXFLAG_EDGE_BUFFER_SIZE=1000
FLEXFLAG_EDGE_ENABLE_SSL=false

# =============================================================================
# NEXT.JS UI CONFIGURATION
# =============================================================================

# Frontend API Configuration
NEXT_PUBLIC_API_URL=http://localhost:8080

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Logging Configuration
FLEXFLAG_LOG_LEVEL=info
FLEXFLAG_LOG_FORMAT=json
FLEXFLAG_LOG_OUTPUT=stdout

# Development Mode Settings (uncomment for development)
# FLEXFLAG_SERVER_DEBUG=true
# FLEXFLAG_LOG_LEVEL=debug
# FLEXFLAG_CORS_ALLOWED_ORIGINS="*"

# =============================================================================
# DOCKER COMPOSE OVERRIDES
# =============================================================================
# These are typically set automatically by docker-compose
# but can be overridden if needed

# Docker Database Settings (when using docker-compose)
# FLEXFLAG_DATABASE_HOST=postgres
# FLEXFLAG_DATABASE_PORT=5432

# Docker Redis Settings (when using docker-compose)
# FLEXFLAG_REDIS_HOST=redis
# FLEXFLAG_REDIS_PORT=6379

# =============================================================================
# PRODUCTION DEPLOYMENT SETTINGS
# =============================================================================
# Uncomment and modify these for production deployments

# Production Database (example)
# FLEXFLAG_DATABASE_HOST=your-db-host.com
# FLEXFLAG_DATABASE_PORT=5432
# FLEXFLAG_DATABASE_USERNAME=flexflag_prod
# FLEXFLAG_DATABASE_PASSWORD=secure_password_here
# FLEXFLAG_DATABASE_DATABASE=flexflag_prod
# FLEXFLAG_DATABASE_SSL_MODE=require
# FLEXFLAG_DATABASE_MAX_CONNS=50
# FLEXFLAG_DATABASE_MIN_CONNS=10

# Production Redis (example)
# FLEXFLAG_REDIS_HOST=your-redis-host.com
# FLEXFLAG_REDIS_PORT=6379
# FLEXFLAG_REDIS_PASSWORD=redis_password_here

# Production Security
# FLEXFLAG_JWT_SECRET="your-256-bit-secret-key-generate-with-openssl"
# FLEXFLAG_CORS_ALLOWED_ORIGINS="https://yourdomain.com,https://app.yourdomain.com"
# FLEXFLAG_SERVER_ENVIRONMENT=production

# Production Performance Tuning
# FLEXFLAG_CACHE_TTL=600
# FLEXFLAG_EDGE_MAX_FLAGS=50000
# FLEXFLAG_EDGE_MAX_API_KEYS=5000
# FLEXFLAG_EDGE_CACHE_TTL=2h
# FLEXFLAG_EDGE_BUFFER_SIZE=5000

# =============================================================================
# SDK INTEGRATION EXAMPLES
# =============================================================================
# These would be used in your applications consuming FlexFlag

# For Node.js/Express applications
# FLEXFLAG_API_KEY=your_client_api_key_here
# FLEXFLAG_API_URL=http://localhost:8080

# For Python Django/Flask applications  
# FLEXFLAG_API_KEY=your_client_api_key_here
# FLEXFLAG_API_URL=http://localhost:8080
# FLEXFLAG_ENVIRONMENT=production
# FLEXFLAG_TIMEOUT=5000
# FLEXFLAG_CACHE_ENABLED=true

# =============================================================================
# QUICK START CONFIGURATIONS
# =============================================================================

# For Local Development (default settings)
# Just copy this file to .env and run: docker-compose up -d

# For Production Deployment
# 1. Generate secure JWT secret: openssl rand -base64 32
# 2. Set production database credentials
# 3. Configure Redis if using external instance
# 4. Set appropriate CORS origins
# 5. Generate API keys for edge servers
# 6. Update UI API URL to production domain

# For Edge Server Deployment
# 1. Create API key in FlexFlag dashboard
# 2. Set FLEXFLAG_EDGE_API_KEY to the generated key
# 3. Set FLEXFLAG_HUB_URL to your FlexFlag server
# 4. Configure FLEXFLAG_EDGE_SYNC_TYPE=sse (recommended)
# 5. Adjust cache and performance settings as needed